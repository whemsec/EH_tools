#!/usr/bin/env python

import requests
import os
import hashlib

def download(url):
    try:
        # Validate URL
        if not url.startswith("http://") and not url.startswith("https://"):
            raise ValueError("Invalid URL. Please provide a valid HTTP or HTTPS URL.")

        response = requests.get(url)

        # Check if the request was successful
        response.raise_for_status()

        # Generate a unique file name using MD5 hash of the URL
        file_hash = hashlib.md5(url.encode()).hexdigest()
        file_extension = os.path.splitext(url)[1]  # Get the file extension from the URL
        file_name = f"{file_hash}{file_extension}"

        # Save the content to a file
        with open(file_name, "wb") as out_file:
            out_file.write(response.content)

        print(f"Download successful. File saved as '{file_name}'.")

    except requests.exceptions.RequestException as e:
        print("An error occurred while downloading the file:")
        print(e)

    except Exception as e:
        print("An error occurred:")
        print(e)


# input downoad url
download("input_download_url")
